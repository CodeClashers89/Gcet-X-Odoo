{% extends 'base.html' %}

{% block title %}Edit Email Template - Rental ERP{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h1 style="color: #2c3e50;">Edit Template ðŸ“§</h1>
            <p style="color: #666;">{{ template.get_template_type_display }}</p>
        </div>
        <a href="{% url 'system_settings:admin_email_template_list' %}" class="btn btn-secondary">Back to List</a>
    </div>

    <form method="POST" style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        {% csrf_token %}
        
        <div class="form-group">
            <label style="font-weight: 600;">Email Subject</label>
            {{ form.subject }}
            <small style="display: block; color: #666; margin-top: 5px;">Supports variables like {customer_name}, {order_number} etc.</small>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
            <div class="form-group">
                <label style="font-weight: 600;">HTML Body</label>
                {{ form.body_html }}
            </div>
            <div class="form-group">
                <label style="font-weight: 600;">Plain Text Body</label>
                {{ form.body_text }}
            </div>
        </div>

        <div class="form-group" style="margin-top: 20px;">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                {{ form.is_active }}
                <span>Template Active</span>
            </label>
        </div>

        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; text-align: right;">
            <button type="submit" class="btn btn-primary" style="padding: 10px 40px; font-size: 16px;">Update Template</button>
        </div>
    </form>

    <div style="margin-top: 30px; background: #fdf6e3; padding: 20px; border-radius: 8px; border-left: 5px solid #b58900;">
        <h4 style="color: #856404; margin-bottom: 10px;">Available Variables</h4>
        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
            {% for var in template.available_variables %}
                <code style="background: #eee; padding: 2px 6px; border-radius: 3px;">{{ var }}</code>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    .form-group { margin-bottom: 20px; }
    .form-control { width: 100%; border: 1px solid #ccc; padding: 10px; border-radius: 4px; }
</style>
{% endblock %}
